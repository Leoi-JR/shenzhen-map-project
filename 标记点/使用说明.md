# 标记点应用使用说明

## 概述

标记点应用是一个用于在手绘地图上标记点位置并与腾讯地图进行对应的工具。它可以帮助用户建立手绘地图与真实地理坐标之间的映射关系。

## 主要功能

### 1. 手绘地图上传
- 支持拖拽上传或点击上传图片
- 支持格式：JPG、PNG、GIF、BMP、WEBP
- 图片大小限制：最大10MB

### 2. 点击标记
- 在手绘地图上点击任意位置添加标记点
- 自动计算归一化坐标（0-1范围）
- 实时显示标记点的位置信息

### 3. 腾讯地图集成
- 自动加载腾讯地图
- 在地图上点击选择对应的地理位置
- 自动获取经纬度坐标

### 4. 坐标数据管理
- 实时显示所有标记点的坐标信息
- 支持删除不需要的标记点
- 支持编辑和重新定位标记点

### 5. 数据存储与管理
- 一键保存地图数据为JSON文件
- 查看、加载、下载、删除已保存的数据文件
- 自动生成时间戳文件名

## 使用步骤

### 步骤 1：环境准备

1. **启动后端服务**
   ```bash
   cd backend
   python start_server.py
   ```
   
2. **启动标记点应用**
   ```bash
   cd 标记点
   npm install
   npm start
   ```

### 步骤 2：上传手绘地图

1. 点击“上传手绘地图”按钮或直接拖拽图片到上传区域
2. 选择一个清晰的手绘地图文件
3. 上传成功后，图片会显示在左侧区域

### 步骤 3：添加标记点

1. 在手绘地图上点击你要标记的位置
2. 系统会自动在点击位置显示一个红色的标记点
3. 在坐标列表中会自动添加一条新的记录

### 步骤 4：选择对应的地理位置

1. 在右侧的腾讯地图上点击与手绘地图标记点对应的地理位置
2. 系统会自动获取该位置的经纬度坐标
3. 坐标列表中的对应记录会更新显示经纬度信息

### 步骤 5：管理标记点

1. 在坐标列表中查看所有标记点的详细信息
2. 如需删除某个标记点，点击对应记录右侧的“删除”按钮
3. 如需重新定位标记点，可以先删除再重新添加

### 步骤 6：保存数据

1. 所有标记点都设置完成后，点击页面下方的“保存地图数据”按钮
2. 系统会自动生成一个包含当前时间的文件名
3. 数据会保存为JSON格式的文件

### 步骤 7：管理已保存的数据

1. 在“已保存的文件”区域查看所有历史保存的数据文件
2. 点击“加载”可以重新加载之前的数据继续编辑
3. 点击“下载”可以下载原始JSON文件到本地
4. 点击“删除”可以删除不需要的数据文件

## 操作技巧

### 标记点设置技巧

1. **选择明显地标**: 在手绘地图上选择容易识别的地标作为标记点
2. **均匀分布**: 尽量在地图的不同区域设置标记点，避免过度集中
3. **数量适中**: 建议设置 5-20 个标记点，过少影响精度，过多增加工作量
4. **边界覆盖**: 在地图边界也设置一些标记点，保证映射范围完整

### 地理位置选择技巧

1. **放大地图**: 在腾讯地图上放大到适当的级别再点击，提高精度
2. **确认地标**: 确保选择的地理位置与手绘地图上的标记点真实对应
3. **多次检查**: 可以多次点击调整位置，直到满意为止
4. **使用参考**: 结合地图上的道路、建筑物等参考物进行定位

### 数据管理建议

1. **定期保存**: 在制作过程中定期保存数据，防止意外丢失
2. **有意义命名**: 在保存时可以自定义文件名，包含项目名或区域名
3. **数据备份**: 定期下载重要数据到本地进行备份
4. **版本管理**: 对同一个地图的不同版本进行版本管理

## 注意事项

### 图片要求

1. **清晰度**: 上传的手绘地图应具有足够的清晰度，能够辆別地标
2. **完整性**: 确保地图内容完整，没有缺失重要区域
3. **正向放置**: 地图应该正向放置，不要旋转或翻转
4. **文件大小**: 建议控制在 5MB 以内，过大的文件会影响加载速度

### 浏览器要求

1. **推荐浏览器**: Chrome 88+、Firefox 85+、Safari 14+、Edge 88+
2. **JavaScript支持**: 确保浏览器开启JavaScript功能
3. **网络连接**: 需要稳定的网络连接以加载腾讯地图
4. **存储空间**: 浏览器需要足够的存储空间处理图片和数据

### 数据安全

1. **本地存储**: 所有数据都存储在本地服务器，不会上传到第三方
2. **数据备份**: 建议定期备份重要数据到其他位置
3. **权限管理**: 确保只有授权人员可以访问和修改数据
4. **数据验证**: 系统会自动验证数据格式的正确性

## 故障排除

### 常见问题

1. **地图不显示**: 
   - 检查网络连接是否正常
   - 确认腾讯地图API密钥有效
   - 尝试刷新页面或更换浏览器

2. **图片上传失败**: 
   - 检查图片格式是否支持
   - 确认图片大小不超过10MB
   - 尝试压缩图片后重新上传

3. **数据保存失败**: 
   - 检查后端服务是否正常运行
   - 确认网络连接稳定
   - 检查数据格式是否正确

4. **标记点不显示**: 
   - 检查浏览器控制台是否有错误信息
   - 尝试刷新页面或清理浏览器缓存
   - 检查图片是否正确加载

### 性能优化

1. **图片优化**: 使用适当分辨率的图片，避免过大的文件
2. **数据优化**: 定期清理不需要的数据文件
3. **网络优化**: 确保网络连接稳定，避免频繁断线
4. **浏览器优化**: 定期清理浏览器缓存和临时文件

### 技术支持

如果遇到技术问题，可以：

1. **查看控制台**: 打开浏览器开发者工具查看错误信息
2. **查看后端日志**: 检查后端服务的日志输出
3. **重启服务**: 尝试重启后端服务解决问题
4. **更新浏览器**: 确保使用最新版本的浏览器

## 最佳实践

### 工作流程建议

1. **前期准备**: 收集清晰的手绘地图，硅认所有重要地标
2. **系统性标记**: 按照区域或类型系统性地设置标记点
3. **质量检查**: 标记完成后仔细检查每个点的对应关系
4. **数据备份**: 完成后及时保存并备份数据

### 协作建议

1. **角色分工**: 可以安排专人负责数据标记工作
2. **质量检查**: 安排另一人负责检查数据质量
3. **数据共享**: 通过文件下载功能共享数据
4. **版本管理**: 对数据的不同版本进行管理和记录

通过遵循上述使用说明和最佳实践，您可以高效、准确地使用标记点应用来创建手绘地图与地理坐标的映射关系。 